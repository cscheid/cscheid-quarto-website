{"title":"Seven Circles","markdown":{"yaml":{"title":"Seven Circles","date":"2017-11-29","categories":["optical-illusion"]},"containsRefs":false,"markdown":"\n\nThe middle circle stays the same size throughout the animation.\n\n<div id=\"main\"></div>\n\n```{ojs}\n{\n    var svg = d3.select(\"#main\").append(\"svg\")\n    .attr(\"viewBox\", \"0 0 600 600\")\n    .attr(\"width\", \"100%\").attr(\"height\", \"100%\");\n    var center = svg.append(\"circle\");\n    center.attr(\"r\", 48) // 2-pixel margin\n        .attr(\"cx\", 300)\n        .attr(\"cy\", 300)\n        .attr(\"fill\", d3.lab(50, 60, 0));\n\n    var circleData = [{\n        dx: -1,\n        dy: 0\n    }, {\n        dx: 1,\n        dy: 0\n    }, {\n        dx: -0.5,\n        dy: Math.sqrt(3)/2\n    }, {\n        dx: 0.5,\n        dy: Math.sqrt(3)/2\n    }, {\n        dx: -0.5,\n        dy: -Math.sqrt(3)/2\n    }, {\n        dx: 0.5,\n        dy: -Math.sqrt(3)/2\n    }];\n\n    var circles = svg.append(\"g\")\n            .selectAll(\"circle\")\n            .data(circleData)\n            .enter()\n            .append(\"circle\");\n\n    var xScaleSmall = d3.scaleLinear().domain([-1, 1]).range([200, 400]);\n    var yScaleSmall = d3.scaleLinear().domain([-1, 1]).range([400, 200]);\n    var xScaleBig = d3.scaleLinear().domain([-1, 1]).range([120, 420]);\n    var yScaleBig = d3.scaleLinear().domain([-1, 1]).range([420, 120]);\n\n    circles.attr(\"cx\", d => xScaleSmall(d.dx))\n        .attr(\"cy\", d => yScaleSmall(d.dy))\n        .attr(\"r\", 48)\n        .attr(\"fill\", d3.lab(50, -60, 0));\n\n    function cycleBig() {\n        center.transition()\n            .duration(1000)\n            .attr(\"cx\", 270)\n            .attr(\"cy\", 270)\n        ;\n        \n        circles.transition()\n            .duration(1000)\n            .attr(\"cx\", d => xScaleBig(d.dx))\n            .attr(\"cy\", d => yScaleBig(d.dy))\n            .attr(\"r\", 68)\n            .attr(\"fill\", d3.lab(50, -60, 0))\n            .on(\"end\", cycleSmall);\n    }\n\n    function cycleSmall() {\n        center.transition()\n            .duration(1000)\n            .attr(\"cx\", 300)\n            .attr(\"cy\", 300);\n\n        circles.transition()\n            .duration(1000)\n            .attr(\"cx\", d => xScaleSmall(d.dx))\n            .attr(\"cy\", d => yScaleSmall(d.dy))\n            .attr(\"r\", 48)\n            .attr(\"fill\", d3.lab(50, -60, 0))\n            .on(\"end\", cycleBig);\n    }\n\n    cycleBig();\n\n}\n```"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"seven-circles.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"99.9.9","theme":["sandstone","../cscheid-net.scss"],"title":"Seven Circles","date":"2017-11-29","categories":["optical-illusion"]},"extensions":{"book":{"multiFile":true}}}}}