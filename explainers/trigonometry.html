<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-99.9.9">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2017-11-06">

<title>Trigonometry</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script type="module" src="../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Trigonometry</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 6, 2017</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="the-basics" class="level2">
<h2 class="anchored" data-anchor-id="the-basics">The basics</h2>
<p><a href="https://twitter.com/divbyzero/status/927517766369804289">Just like everyone else on twitter</a>, when I saw this diagram below my reaction was: “why didn’t they show this to me 25 years ago?” The lengths of the triangle legs correspond to the values of the trigonometric functions. Drag the point to change the diagram around.</p>
<div class="cell">
<details class="hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="12" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 11;"><span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { plot } <span class="im">from</span> <span class="st">"/src/cscheid/cscheid.js"</span><span class="op">;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="bu">window</span><span class="op">.</span><span class="at">d3</span> <span class="op">=</span> d3<span class="op">;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="bu">window</span><span class="op">.</span><span class="at">_</span> <span class="op">=</span> _<span class="op">;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> main <span class="op">=</span> <span class="fu">svg</span><span class="vs">`&lt;svg viewbox="0 0 600 300" width="100%" height="100%"&gt;&lt;/svg&gt;`</span><span class="op">;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> s <span class="op">=</span> plot<span class="op">.</span><span class="fu">surface</span>({</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">element</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">select</span>(main)<span class="op">,</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">600</span><span class="op">,</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">300</span><span class="op">,</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">margin</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xScale</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()<span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">3</span>])<span class="op">,</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">yScale</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()<span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="fl">1.5</span>])<span class="op">,</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">axes</span><span class="op">:</span> <span class="kw">false</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> xScale <span class="op">=</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="at">xScale</span><span class="op">;</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">appendDefault</span>(el) {</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">function</span>(sel) {</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> sel<span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">append</span>(el)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">each</span>(<span class="kw">function</span>(d) {</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>                <span class="kw">var</span> innerSel <span class="op">=</span> sel<span class="op">.</span><span class="fu">_select</span>(<span class="kw">this</span>)<span class="op">;</span> <span class="co">// hack to use inner selection context</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> (<span class="kw">var</span> key <span class="kw">in</span> d) {</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>                    innerSel<span class="op">.</span><span class="fu">attr</span>(key<span class="op">,</span> d <span class="kw">=&gt;</span> d[key])<span class="op">;</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>            })<span class="op">;</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> <span class="fu">xScale</span>(<span class="dv">1</span>) <span class="op">-</span> <span class="fu">xScale</span>(<span class="dv">0</span>))  <span class="co">// annoying...</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="st">"3px"</span>)<span class="op">;</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span>  <span class="dv">1</span>)</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span>  <span class="dv">0</span>)</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span>  <span class="dv">0</span>)</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="st">"1px"</span>)<span class="op">;</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span>  <span class="dv">1</span>)</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span>  <span class="dv">0</span>)</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span>  <span class="dv">0</span>)</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="st">"1px"</span>)<span class="op">;</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> t <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span><span class="op">/</span><span class="dv">3</span><span class="op">;</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> linesG <span class="op">=</span> s<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> arcG <span class="op">=</span> s<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> h0 <span class="op">=</span> <span class="dv">30</span><span class="op">;</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> c0 <span class="op">=</span> <span class="dv">70</span><span class="op">;</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> l0 <span class="op">=</span> <span class="dv">50</span><span class="op">;</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> colors <span class="op">=</span> [</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">0</span><span class="op">,</span>   <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>)    <span class="op">,</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">0</span><span class="op">,</span>   c0<span class="op">,</span> l0)  <span class="op">,</span>    </span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">180</span><span class="op">,</span> c0<span class="op">,</span> l0)  <span class="op">,</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">60</span><span class="op">,</span>  c0<span class="op">,</span> l0)  <span class="op">,</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">240</span><span class="op">,</span> c0<span class="op">,</span> l0)  <span class="op">,</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">120</span><span class="op">,</span> c0<span class="op">,</span> l0)  <span class="op">,</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">300</span><span class="op">,</span> c0<span class="op">,</span> l0)  <span class="op">,</span>    </span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>]<span class="op">;</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">updateLines</span>() {</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>    linesG<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"line"</span>)<span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> lines <span class="op">=</span> [</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">x2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">y2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>                         <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">0</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="dv">1</span> }<span class="op">,</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">x2</span><span class="op">:</span> <span class="dv">1</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>             <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">1</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="st">"5px"</span> }<span class="op">,</span>   </span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">x2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>             <span class="dt">y2</span><span class="op">:</span> <span class="dv">1</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">2</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="st">"5px"</span> }<span class="op">,</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">x2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>             <span class="dt">y2</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span>   <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">3</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="st">"5px"</span> }<span class="op">,</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>           <span class="dt">x2</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span>   <span class="dt">y2</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span>   <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">4</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="st">"5px"</span> }<span class="op">,</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>                     <span class="dt">x2</span><span class="op">:</span> <span class="dv">1</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>             <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">5</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="st">"5px"</span> }<span class="op">,</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>                     <span class="dt">x2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>             <span class="dt">y2</span><span class="op">:</span> <span class="dv">1</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">6</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="st">"5px"</span> }<span class="op">,</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>    linesG<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"line"</span>)</span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">data</span>(lines)</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">callReturn</span>(<span class="fu">appendDefault</span>(<span class="st">"line"</span>))<span class="op">;</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>    arcG<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)<span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> r <span class="op">=</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="fu">xScale</span>(<span class="fl">0.1</span>) <span class="op">-</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="fu">xScale</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>    <span class="co">// awkward again..</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>    arcG<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> <span class="st">"M "</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>              <span class="op">+</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="fu">xScale</span>(<span class="fl">0.1</span>) <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="fu">yScale</span>(<span class="dv">0</span>)</span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>              <span class="op">+</span> <span class="st">" A "</span> <span class="op">+</span> r <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> r <span class="op">+</span> <span class="st">" 0 0 0 "</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>              <span class="op">+</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="fu">xScale</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">*</span><span class="fl">0.1</span>) <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="fu">yScale</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">*</span><span class="fl">0.1</span>))</span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"none"</span>)<span class="op">;</span></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a><span class="fu">updateLines</span>()<span class="op">;</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> annotationsG <span class="op">=</span> s<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">updateAnnotations</span>() {</span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>    annotationsG<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)<span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> tx <span class="op">=</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t) <span class="op">+</span> <span class="dv">1</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t))<span class="op">/</span><span class="dv">2</span><span class="op">,</span> ty <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">/</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> ctx <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">/</span><span class="dv">2</span><span class="op">,</span> cty <span class="op">=</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t) <span class="op">+</span> <span class="dv">1</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t))<span class="op">/</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> annotations <span class="op">=</span> [</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> tx <span class="op">-</span> ty <span class="op">/</span> <span class="dv">20</span><span class="op">,</span>   <span class="dt">y</span><span class="op">:</span> ty <span class="op">+</span> tx <span class="op">/</span> <span class="dv">20</span><span class="op">,</span>   <span class="dt">text</span><span class="op">:</span> <span class="st">"tangent"</span><span class="op">,</span>   <span class="dt">fill</span><span class="op">:</span> colors[<span class="dv">1</span>] }<span class="op">,</span> <span class="co">// { x1: Math.cos(t), y1: Math.sin(t), x2: 1/Math.cos(t), y2: 0,             stroke: d3.hcl(0, 60, 60)    },   </span></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> ctx <span class="op">-</span> cty <span class="op">/</span> <span class="dv">20</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> cty <span class="op">+</span> ctx <span class="op">/</span> <span class="dv">20</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"cotangent"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> colors[<span class="dv">2</span>] }<span class="op">,</span> <span class="co">// { x1: Math.cos(t), y1: Math.sin(t), x2: 0,             y2: 1/Math.sin(t), stroke: d3.hcl(180, 60, 60)  },</span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">/</span><span class="dv">2</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"cosine"</span><span class="op">,</span> <span class="dt">anchor</span><span class="op">:</span> <span class="st">"middle"</span><span class="op">,</span> <span class="dt">baseline</span><span class="op">:</span> <span class="st">"text-before-edge"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> colors[<span class="dv">3</span>] }<span class="op">,</span> <span class="co">// { x1: Math.cos(t), y1: Math.sin(t), x2: 0,             y2: Math.sin(t),   stroke: d3.hcl(60,  60, 60)  },</span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">/</span><span class="dv">2</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"sine"</span><span class="op">,</span> <span class="dt">anchor</span><span class="op">:</span> <span class="st">"right"</span><span class="op">,</span> <span class="dt">baseline</span><span class="op">:</span> <span class="st">"middle"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> colors[<span class="dv">4</span>] }<span class="op">,</span> <span class="co">// { x1: Math.cos(t), y1: 0,           x2: Math.cos(t),   y2: Math.sin(t),   stroke: d3.hcl(240, 60, 60)  },</span></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="fl">0.02</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"secant"</span><span class="op">,</span> <span class="dt">anchor</span><span class="op">:</span> <span class="st">"middle"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> colors[<span class="dv">5</span>] }<span class="op">,</span> <span class="co">// { x1: 0, y1: 0,                     x2: 1/Math.cos(t), y2: 0,             stroke: d3.hcl(120, 60, 60)  },</span></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="fl">0.02</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"cosecant"</span><span class="op">,</span> <span class="dt">baseline</span><span class="op">:</span> <span class="st">"middle"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> colors[<span class="dv">6</span>] }<span class="op">,</span> <span class="co">// { x1: 0, y1: 0,                     x2: 0,             y2: 1/Math.sin(t), stroke: d3.hcl(300, 60, 60)  }</span></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t<span class="op">/</span><span class="dv">2</span>)<span class="op">*</span><span class="fl">0.12</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t<span class="op">/</span><span class="dv">2</span>)<span class="op">*</span><span class="fl">0.12</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"t"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"black"</span> }</span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>    annotationsG<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"text"</span>)</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">data</span>(annotations)</span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">x</span>)</span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">y</span>)</span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">text</span>)</span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"white"</span>)</span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="st">"5px"</span>)</span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="st">"white"</span>)</span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">anchor</span> <span class="op">||</span> <span class="kw">null</span>)</span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dominant-baseline"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">baseline</span> <span class="op">||</span> <span class="kw">null</span>)</span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font"</span><span class="op">,</span> <span class="st">"11pt Helvetica Neue"</span>)</span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"300"</span>)</span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>    annotationsG<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"text"</span>)</span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">data</span>(annotations)</span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">x</span>)</span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">y</span>)</span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">text</span>)</span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="fu">hcl</span>(d<span class="op">.</span><span class="at">fill</span>)<span class="op">.</span><span class="fu">darker</span>())</span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">anchor</span> <span class="op">||</span> <span class="kw">null</span>)</span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dominant-baseline"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">baseline</span> <span class="op">||</span> <span class="kw">null</span>)</span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font"</span><span class="op">,</span> <span class="st">"11pt Helvetica Neue"</span>)</span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"300"</span>)<span class="op">;</span></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a><span class="fu">updateAnnotations</span>()<span class="op">;</span></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> circleHandle <span class="op">=</span> s<span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)<span class="op">;</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a>circleHandle<span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t))</span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t))</span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> <span class="dv">8</span>)</span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"white"</span>)</span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="st">"2px"</span>)</span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cursor"</span><span class="op">,</span> <span class="st">"pointer"</span>)</span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">drag</span>()</span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"drag"</span><span class="op">,</span> <span class="kw">function</span>(e) {</span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>              <span class="kw">var</span> x <span class="op">=</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="at">xScale</span><span class="op">.</span><span class="fu">invert</span>(e<span class="op">.</span><span class="at">x</span>)<span class="op">;</span></span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>              <span class="kw">var</span> y <span class="op">=</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="at">yScale</span><span class="op">.</span><span class="fu">invert</span>(e<span class="op">.</span><span class="at">y</span>)<span class="op">;</span></span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (x <span class="op">&lt;</span> <span class="fl">0.001</span>) x <span class="op">=</span> <span class="fl">0.001</span><span class="op">;</span></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (y <span class="op">&lt;</span> <span class="fl">0.001</span>) y <span class="op">=</span> <span class="fl">0.001</span><span class="op">;</span></span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (x <span class="op">&gt;</span> <span class="fl">0.999</span>) x <span class="op">=</span> <span class="fl">0.999</span><span class="op">;</span></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (y <span class="op">&gt;</span> <span class="fl">0.999</span>) y <span class="op">=</span> <span class="fl">0.999</span><span class="op">;</span></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>              <span class="kw">var</span> l <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(x <span class="op">*</span> x <span class="op">+</span> y <span class="op">*</span> y)<span class="op">;</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>              x <span class="op">/=</span> l<span class="op">;</span></span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>              y <span class="op">/=</span> l<span class="op">;</span></span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a>              t <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">acos</span>(x)<span class="op">;</span></span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a>              circleHandle<span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> x)<span class="op">;</span></span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a>              circleHandle<span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> y)<span class="op">;</span></span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a>              <span class="fu">updateLines</span>()<span class="op">;</span></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a>              <span class="fu">updateAnnotations</span>()<span class="op">;</span></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a>          })<span class="op">.</span><span class="fu">on</span>(<span class="st">"end"</span><span class="op">,</span> <span class="kw">function</span>(e) {</span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a>              <span class="kw">var</span> x <span class="op">=</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="at">xScale</span><span class="op">.</span><span class="fu">invert</span>(e<span class="op">.</span><span class="at">x</span>)<span class="op">;</span></span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>              <span class="kw">var</span> y <span class="op">=</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="at">yScale</span><span class="op">.</span><span class="fu">invert</span>(e<span class="op">.</span><span class="at">y</span>)<span class="op">;</span></span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (x <span class="op">&lt;</span> <span class="fl">0.001</span>) x <span class="op">=</span> <span class="fl">0.001</span><span class="op">;</span></span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (y <span class="op">&lt;</span> <span class="fl">0.001</span>) y <span class="op">=</span> <span class="fl">0.001</span><span class="op">;</span></span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (x <span class="op">&gt;</span> <span class="fl">0.999</span>) x <span class="op">=</span> <span class="fl">0.999</span><span class="op">;</span></span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (y <span class="op">&gt;</span> <span class="fl">0.999</span>) y <span class="op">=</span> <span class="fl">0.999</span><span class="op">;</span></span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a>              <span class="kw">var</span> l <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(x <span class="op">*</span> x <span class="op">+</span> y <span class="op">*</span> y)<span class="op">;</span></span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a>              x <span class="op">/=</span> l<span class="op">;</span></span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>              y <span class="op">/=</span> l<span class="op">;</span></span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a>              t <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">acos</span>(x)<span class="op">;</span></span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>              circleHandle<span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> x)<span class="op">;</span></span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>              circleHandle<span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> y)<span class="op">;</span></span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>              <span class="fu">updateLines</span>()<span class="op">;</span></span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a>              <span class="fu">updateAnnotations</span>()<span class="op">;</span></span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>          }))<span class="op">;</span></span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> main<span class="op">;</span></span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
</section>
<section id="complex-exponentials-ftw" class="level2">
<h2 class="anchored" data-anchor-id="complex-exponentials-ftw">Complex Exponentials FTW</h2>
<p>We start from the formula for complex exponentials:</p>
<p><span class="math display">\[\begin{eqnarray*}e^{ix} &amp; &amp; = &amp; \ \cos x + i \sin x \\ e^{-ix} &amp; = \ \cos -x + i \sin -x &amp; = &amp; \cos x - i \sin x \end{eqnarray*}\]</span></p>
<p>We re-arrange this a bit to find a formula for cosines and sines in terms of the exponentials. This is maybe the two trigonometry formulas worth memorizing:</p>
<p><span class="math display">\[\begin{eqnarray*} \cos x &amp; = &amp; \frac{e^{ix}+e^{-ix}}{2} \\ \sin x &amp; = &amp; \frac{e^{ix}-e^{-ix}}{2} \end{eqnarray*}\]</span></p>
<p>Never memorize a formula for sines and cosines of sums again. <a href="https://wstein.org/edu/winter06/20b/notes/html/node30.html">Stein</a> has some examples of how you can use this.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"import { plot } from \"/src/cscheid/cscheid.js\";\n{\n  window.d3 = d3;\n  window._ = _;\n  const main = svg`<svg viewbox=\"0 0 600 300\" width=\"100%\" height=\"100%\"></svg>`;\n\nvar s = plot.surface({\n    element: d3.select(main),\n    width: 600,\n    height: 300,\n    margin: 2,\n    xScale: d3.scaleLinear().domain([0, 3]),\n    yScale: d3.scaleLinear().domain([0, 1.5]),\n    axes: false\n});\n\nvar xScale = s.surface.xScale;\n\nfunction appendDefault(el) {\n    return function(sel) {\n        return sel.enter()\n            .append(el)\n            .each(function(d) {\n                var innerSel = sel._select(this); // hack to use inner selection context\n                for (var key in d) {\n                    innerSel.attr(key, d => d[key]);\n                }\n            });\n    };\n}\n\ns.append(\"circle\")\n    .attr(\"r\", xScale(1) - xScale(0))  // annoying...\n    .attr(\"cx\", 0)\n    .attr(\"cy\", 0)\n    .attr(\"stroke\", \"black\")\n    .attr(\"fill\", \"none\")\n    .attr(\"stroke-width\", \"3px\");\n\ns.append(\"line\")\n    .attr(\"x1\", -1)\n    .attr(\"x2\",  1)\n    .attr(\"y1\",  0)\n    .attr(\"y2\",  0)\n    .attr(\"stroke\", \"black\")\n    .attr(\"fill\", \"none\")\n    .attr(\"stroke-width\", \"1px\");\n\ns.append(\"line\")\n    .attr(\"y1\", -1)\n    .attr(\"y2\",  1)\n    .attr(\"x1\",  0)\n    .attr(\"x2\",  0)\n    .attr(\"stroke\", \"black\")\n    .attr(\"fill\", \"none\")\n    .attr(\"stroke-width\", \"1px\");\n\nvar t = Math.PI/3;\n\nvar linesG = s.append(\"g\");\nvar arcG = s.append(\"g\");\n\nvar h0 = 30;\nvar c0 = 70;\nvar l0 = 50;\nvar colors = [\nd3.hcl(h0+0,   0, 0)    ,\nd3.hcl(h0+0,   c0, l0)  ,    \nd3.hcl(h0+180, c0, l0)  ,\nd3.hcl(h0+60,  c0, l0)  ,\nd3.hcl(h0+240, c0, l0)  ,\nd3.hcl(h0+120, c0, l0)  ,\nd3.hcl(h0+300, c0, l0)  ,    \n];\n\nfunction updateLines() {\n    linesG.selectAll(\"line\").remove();\n    var lines = [\n        { x1: Math.cos(t), y1: Math.sin(t), x2: 0, y2: 0,                         stroke:  colors[0], \"stroke-width\": 1 },\n        \n        { x1: Math.cos(t), y1: Math.sin(t), x2: 1/Math.cos(t), y2: 0,             stroke:  colors[1], \"stroke-width\": \"5px\" },   \n        { x1: Math.cos(t), y1: Math.sin(t), x2: 0,             y2: 1/Math.sin(t), stroke:  colors[2], \"stroke-width\": \"5px\" },\n        \n        { x1: Math.cos(t), y1: Math.sin(t), x2: 0,             y2: Math.sin(t),   stroke:  colors[3], \"stroke-width\": \"5px\" },\n        { x1: Math.cos(t), y1: 0,           x2: Math.cos(t),   y2: Math.sin(t),   stroke:  colors[4], \"stroke-width\": \"5px\" },\n\n        { x1: 0, y1: 0,                     x2: 1/Math.cos(t), y2: 0,             stroke:  colors[5], \"stroke-width\": \"5px\" },\n        { x1: 0, y1: 0,                     x2: 0,             y2: 1/Math.sin(t), stroke:  colors[6], \"stroke-width\": \"5px\" },\n    ];\n    \n    linesG.selectAll(\"line\")\n        .data(lines)\n        .callReturn(appendDefault(\"line\"));\n\n    arcG.selectAll(\"path\").remove();\n\n    var r = s.surface.xScale(0.1) - s.surface.xScale(0);\n    // awkward again..\n    arcG.append(\"path\")\n        .attr(\"d\", \"M \"\n              + s.surface.xScale(0.1) + \" \" + s.surface.yScale(0)\n              + \" A \" + r + \" \" + r + \" 0 0 0 \"\n              + s.surface.xScale(Math.cos(t)*0.1) + \" \" + s.surface.yScale(Math.sin(t)*0.1))\n        .attr(\"stroke\", \"black\")\n        .attr(\"fill\", \"none\");\n}\nupdateLines();\n\nvar annotationsG = s.append(\"g\");\nfunction updateAnnotations() {\n    annotationsG.selectAll(\"g\").remove();\n\n    var tx = (Math.cos(t) + 1/Math.cos(t))/2, ty = Math.sin(t)/2;\n    var ctx = Math.cos(t)/2, cty = (Math.sin(t) + 1/Math.sin(t))/2;\n\n    var annotations = [\n        { x: tx - ty / 20,   y: ty + tx / 20,   text: \"tangent\",   fill: colors[1] }, // { x1: Math.cos(t), y1: Math.sin(t), x2: 1/Math.cos(t), y2: 0,             stroke: d3.hcl(0, 60, 60)    },   \n        { x: ctx - cty / 20, y: cty + ctx / 20, text: \"cotangent\", fill: colors[2] }, // { x1: Math.cos(t), y1: Math.sin(t), x2: 0,             y2: 1/Math.sin(t), stroke: d3.hcl(180, 60, 60)  },\n        \n        { x: Math.cos(t)/2, y: Math.sin(t), text: \"cosine\", anchor: \"middle\", baseline: \"text-before-edge\", fill: colors[3] }, // { x1: Math.cos(t), y1: Math.sin(t), x2: 0,             y2: Math.sin(t),   stroke: d3.hcl(60,  60, 60)  },\n        { x: Math.cos(t), y: Math.sin(t)/2, text: \"sine\", anchor: \"right\", baseline: \"middle\", fill: colors[4] }, // { x1: Math.cos(t), y1: 0,           x2: Math.cos(t),   y2: Math.sin(t),   stroke: d3.hcl(240, 60, 60)  },\n\n        { x: 0.5/Math.cos(t), y: 0.02, text: \"secant\", anchor: \"middle\", fill: colors[5] }, // { x1: 0, y1: 0,                     x2: 1/Math.cos(t), y2: 0,             stroke: d3.hcl(120, 60, 60)  },\n        { x: 0.02, y: 0.5/Math.sin(t), text: \"cosecant\", baseline: \"middle\", fill: colors[6] }, // { x1: 0, y1: 0,                     x2: 0,             y2: 1/Math.sin(t), stroke: d3.hcl(300, 60, 60)  }\n        { x: Math.cos(t/2)*0.12, y: Math.sin(t/2)*0.12, text: \"t\", fill: \"black\" }\n    ];\n\n    annotationsG.append(\"g\").selectAll(\"text\")\n        .data(annotations)\n        .enter()\n        .append(\"text\")\n        .attr(\"x\", d => d.x)\n        .attr(\"y\", d => d.y)\n        .text(d => d.text)\n        .attr(\"stroke\", \"white\")\n        .attr(\"stroke-width\", \"5px\")\n        .attr(\"fill\", d => \"white\")\n        .attr(\"text-anchor\", d => d.anchor || null)\n        .attr(\"dominant-baseline\", d => d.baseline || null)\n        .attr(\"font\", \"11pt Helvetica Neue\")\n        .attr(\"font-weight\", \"300\")\n    ;\n\n    annotationsG.append(\"g\").selectAll(\"text\")\n        .data(annotations)\n        .enter()\n        .append(\"text\")\n        .attr(\"x\", d => d.x)\n        .attr(\"y\", d => d.y)\n        .text(d => d.text)\n        .attr(\"fill\", d => d3.hcl(d.fill).darker())\n        .attr(\"text-anchor\", d => d.anchor || null)\n        .attr(\"dominant-baseline\", d => d.baseline || null)\n        .attr(\"font\", \"11pt Helvetica Neue\")\n        .attr(\"font-weight\", \"300\");\n\n}\nupdateAnnotations();\n\nvar circleHandle = s.append(\"circle\");\ncircleHandle.attr(\"cx\", Math.cos(t))\n    .attr(\"cy\", Math.sin(t))\n    .attr(\"r\", 8)\n    .attr(\"fill\", \"white\")\n    .attr(\"stroke\", \"black\")\n    .attr(\"stroke-width\", \"2px\")\n    .attr(\"cursor\", \"pointer\")\n    .call(d3.drag()\n          .on(\"drag\", function(e) {\n              var x = s.surface.xScale.invert(e.x);\n              var y = s.surface.yScale.invert(e.y);\n              if (x < 0.001) x = 0.001;\n              if (y < 0.001) y = 0.001;\n              if (x > 0.999) x = 0.999;\n              if (y > 0.999) y = 0.999;\n              var l = Math.sqrt(x * x + y * y);\n              x /= l;\n              y /= l;\n              t = Math.acos(x);\n              circleHandle.attr(\"cx\", x);\n              circleHandle.attr(\"cy\", y);\n              updateLines();\n              updateAnnotations();\n          }).on(\"end\", function(e) {\n              var x = s.surface.xScale.invert(e.x);\n              var y = s.surface.yScale.invert(e.y);\n              if (x < 0.001) x = 0.001;\n              if (y < 0.001) y = 0.001;\n              if (x > 0.999) x = 0.999;\n              if (y > 0.999) y = 0.999;\n              var l = Math.sqrt(x * x + y * y);\n              x /= l;\n              y /= l;\n              t = Math.acos(x);\n              circleHandle.attr(\"cx\", x);\n              circleHandle.attr(\"cy\", y);\n              updateLines();\n              updateAnnotations();\n          }));\n\n\n  return main;\n}\n"}]}
</script>
<script type="module">
window._ojs.paths.runtimeToDoc = "../../explainers";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb2" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> Trigonometry</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> 2017-11-06</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">## The basics</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Just like everyone else on twitter</span><span class="co">](https://twitter.com/divbyzero/status/927517766369804289)</span>, when I saw this diagram below my reaction was: “why didn't they show this to me 25 years ago?” The lengths of the triangle legs correspond to the values of the trigonometric functions. Drag the point to change the diagram around.</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { plot } <span class="im">from</span> <span class="st">"/src/cscheid/cscheid.js"</span><span class="op">;</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="bu">window</span><span class="op">.</span><span class="at">d3</span> <span class="op">=</span> d3<span class="op">;</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="bu">window</span><span class="op">.</span><span class="at">_</span> <span class="op">=</span> _<span class="op">;</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> main <span class="op">=</span> <span class="fu">svg</span><span class="vs">`&lt;svg viewbox="0 0 600 300" width="100%" height="100%"&gt;&lt;/svg&gt;`</span><span class="op">;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> s <span class="op">=</span> plot<span class="op">.</span><span class="fu">surface</span>({</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">element</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">select</span>(main)<span class="op">,</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">600</span><span class="op">,</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">300</span><span class="op">,</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">margin</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xScale</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()<span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">3</span>])<span class="op">,</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">yScale</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()<span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="fl">1.5</span>])<span class="op">,</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">axes</span><span class="op">:</span> <span class="kw">false</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> xScale <span class="op">=</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="at">xScale</span><span class="op">;</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">appendDefault</span>(el) {</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">function</span>(sel) {</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> sel<span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">append</span>(el)</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">each</span>(<span class="kw">function</span>(d) {</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>                <span class="kw">var</span> innerSel <span class="op">=</span> sel<span class="op">.</span><span class="fu">_select</span>(<span class="kw">this</span>)<span class="op">;</span> <span class="co">// hack to use inner selection context</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> (<span class="kw">var</span> key <span class="kw">in</span> d) {</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>                    innerSel<span class="op">.</span><span class="fu">attr</span>(key<span class="op">,</span> d <span class="kw">=&gt;</span> d[key])<span class="op">;</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>            })<span class="op">;</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> <span class="fu">xScale</span>(<span class="dv">1</span>) <span class="op">-</span> <span class="fu">xScale</span>(<span class="dv">0</span>))  <span class="co">// annoying...</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="st">"3px"</span>)<span class="op">;</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span>  <span class="dv">1</span>)</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span>  <span class="dv">0</span>)</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span>  <span class="dv">0</span>)</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="st">"1px"</span>)<span class="op">;</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span>  <span class="dv">1</span>)</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span>  <span class="dv">0</span>)</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span>  <span class="dv">0</span>)</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="st">"1px"</span>)<span class="op">;</span></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> t <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span><span class="op">/</span><span class="dv">3</span><span class="op">;</span></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> linesG <span class="op">=</span> s<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> arcG <span class="op">=</span> s<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> h0 <span class="op">=</span> <span class="dv">30</span><span class="op">;</span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> c0 <span class="op">=</span> <span class="dv">70</span><span class="op">;</span></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> l0 <span class="op">=</span> <span class="dv">50</span><span class="op">;</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> colors <span class="op">=</span> [</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">0</span><span class="op">,</span>   <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>)    <span class="op">,</span></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">0</span><span class="op">,</span>   c0<span class="op">,</span> l0)  <span class="op">,</span>    </span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">180</span><span class="op">,</span> c0<span class="op">,</span> l0)  <span class="op">,</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">60</span><span class="op">,</span>  c0<span class="op">,</span> l0)  <span class="op">,</span></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">240</span><span class="op">,</span> c0<span class="op">,</span> l0)  <span class="op">,</span></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">120</span><span class="op">,</span> c0<span class="op">,</span> l0)  <span class="op">,</span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">hcl</span>(h0<span class="op">+</span><span class="dv">300</span><span class="op">,</span> c0<span class="op">,</span> l0)  <span class="op">,</span>    </span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>]<span class="op">;</span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">updateLines</span>() {</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>    linesG<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"line"</span>)<span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> lines <span class="op">=</span> [</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">x2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">y2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>                         <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">0</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="dv">1</span> }<span class="op">,</span></span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">x2</span><span class="op">:</span> <span class="dv">1</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>             <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">1</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="st">"5px"</span> }<span class="op">,</span>   </span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">x2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>             <span class="dt">y2</span><span class="op">:</span> <span class="dv">1</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">2</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="st">"5px"</span> }<span class="op">,</span></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">x2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>             <span class="dt">y2</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span>   <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">3</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="st">"5px"</span> }<span class="op">,</span></span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>           <span class="dt">x2</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span>   <span class="dt">y2</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span>   <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">4</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="st">"5px"</span> }<span class="op">,</span></span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>                     <span class="dt">x2</span><span class="op">:</span> <span class="dv">1</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>             <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">5</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="st">"5px"</span> }<span class="op">,</span></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x1</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>                     <span class="dt">x2</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>             <span class="dt">y2</span><span class="op">:</span> <span class="dv">1</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span>  colors[<span class="dv">6</span>]<span class="op">,</span> <span class="st">"stroke-width"</span><span class="op">:</span> <span class="st">"5px"</span> }<span class="op">,</span></span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>    linesG<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"line"</span>)</span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">data</span>(lines)</span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">callReturn</span>(<span class="fu">appendDefault</span>(<span class="st">"line"</span>))<span class="op">;</span></span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>    arcG<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)<span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> r <span class="op">=</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="fu">xScale</span>(<span class="fl">0.1</span>) <span class="op">-</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="fu">xScale</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>    <span class="co">// awkward again..</span></span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>    arcG<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> <span class="st">"M "</span></span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>              <span class="op">+</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="fu">xScale</span>(<span class="fl">0.1</span>) <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="fu">yScale</span>(<span class="dv">0</span>)</span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a>              <span class="op">+</span> <span class="st">" A "</span> <span class="op">+</span> r <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> r <span class="op">+</span> <span class="st">" 0 0 0 "</span></span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a>              <span class="op">+</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="fu">xScale</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">*</span><span class="fl">0.1</span>) <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="fu">yScale</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">*</span><span class="fl">0.1</span>))</span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"none"</span>)<span class="op">;</span></span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a><span class="fu">updateLines</span>()<span class="op">;</span></span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> annotationsG <span class="op">=</span> s<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">updateAnnotations</span>() {</span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>    annotationsG<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)<span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> tx <span class="op">=</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t) <span class="op">+</span> <span class="dv">1</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t))<span class="op">/</span><span class="dv">2</span><span class="op">,</span> ty <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">/</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> ctx <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">/</span><span class="dv">2</span><span class="op">,</span> cty <span class="op">=</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t) <span class="op">+</span> <span class="dv">1</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t))<span class="op">/</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> annotations <span class="op">=</span> [</span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> tx <span class="op">-</span> ty <span class="op">/</span> <span class="dv">20</span><span class="op">,</span>   <span class="dt">y</span><span class="op">:</span> ty <span class="op">+</span> tx <span class="op">/</span> <span class="dv">20</span><span class="op">,</span>   <span class="dt">text</span><span class="op">:</span> <span class="st">"tangent"</span><span class="op">,</span>   <span class="dt">fill</span><span class="op">:</span> colors[<span class="dv">1</span>] }<span class="op">,</span> <span class="co">// { x1: Math.cos(t), y1: Math.sin(t), x2: 1/Math.cos(t), y2: 0,             stroke: d3.hcl(0, 60, 60)    },   </span></span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> ctx <span class="op">-</span> cty <span class="op">/</span> <span class="dv">20</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> cty <span class="op">+</span> ctx <span class="op">/</span> <span class="dv">20</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"cotangent"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> colors[<span class="dv">2</span>] }<span class="op">,</span> <span class="co">// { x1: Math.cos(t), y1: Math.sin(t), x2: 0,             y2: 1/Math.sin(t), stroke: d3.hcl(180, 60, 60)  },</span></span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">/</span><span class="dv">2</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"cosine"</span><span class="op">,</span> <span class="dt">anchor</span><span class="op">:</span> <span class="st">"middle"</span><span class="op">,</span> <span class="dt">baseline</span><span class="op">:</span> <span class="st">"text-before-edge"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> colors[<span class="dv">3</span>] }<span class="op">,</span> <span class="co">// { x1: Math.cos(t), y1: Math.sin(t), x2: 0,             y2: Math.sin(t),   stroke: d3.hcl(60,  60, 60)  },</span></span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">/</span><span class="dv">2</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"sine"</span><span class="op">,</span> <span class="dt">anchor</span><span class="op">:</span> <span class="st">"right"</span><span class="op">,</span> <span class="dt">baseline</span><span class="op">:</span> <span class="st">"middle"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> colors[<span class="dv">4</span>] }<span class="op">,</span> <span class="co">// { x1: Math.cos(t), y1: 0,           x2: Math.cos(t),   y2: Math.sin(t),   stroke: d3.hcl(240, 60, 60)  },</span></span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t)<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="fl">0.02</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"secant"</span><span class="op">,</span> <span class="dt">anchor</span><span class="op">:</span> <span class="st">"middle"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> colors[<span class="dv">5</span>] }<span class="op">,</span> <span class="co">// { x1: 0, y1: 0,                     x2: 1/Math.cos(t), y2: 0,             stroke: d3.hcl(120, 60, 60)  },</span></span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="fl">0.02</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t)<span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"cosecant"</span><span class="op">,</span> <span class="dt">baseline</span><span class="op">:</span> <span class="st">"middle"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> colors[<span class="dv">6</span>] }<span class="op">,</span> <span class="co">// { x1: 0, y1: 0,                     x2: 0,             y2: 1/Math.sin(t), stroke: d3.hcl(300, 60, 60)  }</span></span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t<span class="op">/</span><span class="dv">2</span>)<span class="op">*</span><span class="fl">0.12</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t<span class="op">/</span><span class="dv">2</span>)<span class="op">*</span><span class="fl">0.12</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"t"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"black"</span> }</span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb2-140"><a href="#cb2-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-141"><a href="#cb2-141" aria-hidden="true" tabindex="-1"></a>    annotationsG<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"text"</span>)</span>
<span id="cb2-142"><a href="#cb2-142" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">data</span>(annotations)</span>
<span id="cb2-143"><a href="#cb2-143" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb2-144"><a href="#cb2-144" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb2-145"><a href="#cb2-145" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">x</span>)</span>
<span id="cb2-146"><a href="#cb2-146" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">y</span>)</span>
<span id="cb2-147"><a href="#cb2-147" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">text</span>)</span>
<span id="cb2-148"><a href="#cb2-148" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"white"</span>)</span>
<span id="cb2-149"><a href="#cb2-149" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="st">"5px"</span>)</span>
<span id="cb2-150"><a href="#cb2-150" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="st">"white"</span>)</span>
<span id="cb2-151"><a href="#cb2-151" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">anchor</span> <span class="op">||</span> <span class="kw">null</span>)</span>
<span id="cb2-152"><a href="#cb2-152" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dominant-baseline"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">baseline</span> <span class="op">||</span> <span class="kw">null</span>)</span>
<span id="cb2-153"><a href="#cb2-153" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font"</span><span class="op">,</span> <span class="st">"11pt Helvetica Neue"</span>)</span>
<span id="cb2-154"><a href="#cb2-154" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"300"</span>)</span>
<span id="cb2-155"><a href="#cb2-155" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span></span>
<span id="cb2-156"><a href="#cb2-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-157"><a href="#cb2-157" aria-hidden="true" tabindex="-1"></a>    annotationsG<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"text"</span>)</span>
<span id="cb2-158"><a href="#cb2-158" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">data</span>(annotations)</span>
<span id="cb2-159"><a href="#cb2-159" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb2-160"><a href="#cb2-160" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb2-161"><a href="#cb2-161" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">x</span>)</span>
<span id="cb2-162"><a href="#cb2-162" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">y</span>)</span>
<span id="cb2-163"><a href="#cb2-163" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">text</span>)</span>
<span id="cb2-164"><a href="#cb2-164" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="fu">hcl</span>(d<span class="op">.</span><span class="at">fill</span>)<span class="op">.</span><span class="fu">darker</span>())</span>
<span id="cb2-165"><a href="#cb2-165" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">anchor</span> <span class="op">||</span> <span class="kw">null</span>)</span>
<span id="cb2-166"><a href="#cb2-166" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dominant-baseline"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">baseline</span> <span class="op">||</span> <span class="kw">null</span>)</span>
<span id="cb2-167"><a href="#cb2-167" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font"</span><span class="op">,</span> <span class="st">"11pt Helvetica Neue"</span>)</span>
<span id="cb2-168"><a href="#cb2-168" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"300"</span>)<span class="op">;</span></span>
<span id="cb2-169"><a href="#cb2-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-170"><a href="#cb2-170" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-171"><a href="#cb2-171" aria-hidden="true" tabindex="-1"></a><span class="fu">updateAnnotations</span>()<span class="op">;</span></span>
<span id="cb2-172"><a href="#cb2-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-173"><a href="#cb2-173" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> circleHandle <span class="op">=</span> s<span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)<span class="op">;</span></span>
<span id="cb2-174"><a href="#cb2-174" aria-hidden="true" tabindex="-1"></a>circleHandle<span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(t))</span>
<span id="cb2-175"><a href="#cb2-175" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(t))</span>
<span id="cb2-176"><a href="#cb2-176" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> <span class="dv">8</span>)</span>
<span id="cb2-177"><a href="#cb2-177" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"white"</span>)</span>
<span id="cb2-178"><a href="#cb2-178" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb2-179"><a href="#cb2-179" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="st">"2px"</span>)</span>
<span id="cb2-180"><a href="#cb2-180" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cursor"</span><span class="op">,</span> <span class="st">"pointer"</span>)</span>
<span id="cb2-181"><a href="#cb2-181" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">drag</span>()</span>
<span id="cb2-182"><a href="#cb2-182" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"drag"</span><span class="op">,</span> <span class="kw">function</span>(e) {</span>
<span id="cb2-183"><a href="#cb2-183" aria-hidden="true" tabindex="-1"></a>              <span class="kw">var</span> x <span class="op">=</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="at">xScale</span><span class="op">.</span><span class="fu">invert</span>(e<span class="op">.</span><span class="at">x</span>)<span class="op">;</span></span>
<span id="cb2-184"><a href="#cb2-184" aria-hidden="true" tabindex="-1"></a>              <span class="kw">var</span> y <span class="op">=</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="at">yScale</span><span class="op">.</span><span class="fu">invert</span>(e<span class="op">.</span><span class="at">y</span>)<span class="op">;</span></span>
<span id="cb2-185"><a href="#cb2-185" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (x <span class="op">&lt;</span> <span class="fl">0.001</span>) x <span class="op">=</span> <span class="fl">0.001</span><span class="op">;</span></span>
<span id="cb2-186"><a href="#cb2-186" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (y <span class="op">&lt;</span> <span class="fl">0.001</span>) y <span class="op">=</span> <span class="fl">0.001</span><span class="op">;</span></span>
<span id="cb2-187"><a href="#cb2-187" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (x <span class="op">&gt;</span> <span class="fl">0.999</span>) x <span class="op">=</span> <span class="fl">0.999</span><span class="op">;</span></span>
<span id="cb2-188"><a href="#cb2-188" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (y <span class="op">&gt;</span> <span class="fl">0.999</span>) y <span class="op">=</span> <span class="fl">0.999</span><span class="op">;</span></span>
<span id="cb2-189"><a href="#cb2-189" aria-hidden="true" tabindex="-1"></a>              <span class="kw">var</span> l <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(x <span class="op">*</span> x <span class="op">+</span> y <span class="op">*</span> y)<span class="op">;</span></span>
<span id="cb2-190"><a href="#cb2-190" aria-hidden="true" tabindex="-1"></a>              x <span class="op">/=</span> l<span class="op">;</span></span>
<span id="cb2-191"><a href="#cb2-191" aria-hidden="true" tabindex="-1"></a>              y <span class="op">/=</span> l<span class="op">;</span></span>
<span id="cb2-192"><a href="#cb2-192" aria-hidden="true" tabindex="-1"></a>              t <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">acos</span>(x)<span class="op">;</span></span>
<span id="cb2-193"><a href="#cb2-193" aria-hidden="true" tabindex="-1"></a>              circleHandle<span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> x)<span class="op">;</span></span>
<span id="cb2-194"><a href="#cb2-194" aria-hidden="true" tabindex="-1"></a>              circleHandle<span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> y)<span class="op">;</span></span>
<span id="cb2-195"><a href="#cb2-195" aria-hidden="true" tabindex="-1"></a>              <span class="fu">updateLines</span>()<span class="op">;</span></span>
<span id="cb2-196"><a href="#cb2-196" aria-hidden="true" tabindex="-1"></a>              <span class="fu">updateAnnotations</span>()<span class="op">;</span></span>
<span id="cb2-197"><a href="#cb2-197" aria-hidden="true" tabindex="-1"></a>          })<span class="op">.</span><span class="fu">on</span>(<span class="st">"end"</span><span class="op">,</span> <span class="kw">function</span>(e) {</span>
<span id="cb2-198"><a href="#cb2-198" aria-hidden="true" tabindex="-1"></a>              <span class="kw">var</span> x <span class="op">=</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="at">xScale</span><span class="op">.</span><span class="fu">invert</span>(e<span class="op">.</span><span class="at">x</span>)<span class="op">;</span></span>
<span id="cb2-199"><a href="#cb2-199" aria-hidden="true" tabindex="-1"></a>              <span class="kw">var</span> y <span class="op">=</span> s<span class="op">.</span><span class="at">surface</span><span class="op">.</span><span class="at">yScale</span><span class="op">.</span><span class="fu">invert</span>(e<span class="op">.</span><span class="at">y</span>)<span class="op">;</span></span>
<span id="cb2-200"><a href="#cb2-200" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (x <span class="op">&lt;</span> <span class="fl">0.001</span>) x <span class="op">=</span> <span class="fl">0.001</span><span class="op">;</span></span>
<span id="cb2-201"><a href="#cb2-201" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (y <span class="op">&lt;</span> <span class="fl">0.001</span>) y <span class="op">=</span> <span class="fl">0.001</span><span class="op">;</span></span>
<span id="cb2-202"><a href="#cb2-202" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (x <span class="op">&gt;</span> <span class="fl">0.999</span>) x <span class="op">=</span> <span class="fl">0.999</span><span class="op">;</span></span>
<span id="cb2-203"><a href="#cb2-203" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (y <span class="op">&gt;</span> <span class="fl">0.999</span>) y <span class="op">=</span> <span class="fl">0.999</span><span class="op">;</span></span>
<span id="cb2-204"><a href="#cb2-204" aria-hidden="true" tabindex="-1"></a>              <span class="kw">var</span> l <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(x <span class="op">*</span> x <span class="op">+</span> y <span class="op">*</span> y)<span class="op">;</span></span>
<span id="cb2-205"><a href="#cb2-205" aria-hidden="true" tabindex="-1"></a>              x <span class="op">/=</span> l<span class="op">;</span></span>
<span id="cb2-206"><a href="#cb2-206" aria-hidden="true" tabindex="-1"></a>              y <span class="op">/=</span> l<span class="op">;</span></span>
<span id="cb2-207"><a href="#cb2-207" aria-hidden="true" tabindex="-1"></a>              t <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">acos</span>(x)<span class="op">;</span></span>
<span id="cb2-208"><a href="#cb2-208" aria-hidden="true" tabindex="-1"></a>              circleHandle<span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> x)<span class="op">;</span></span>
<span id="cb2-209"><a href="#cb2-209" aria-hidden="true" tabindex="-1"></a>              circleHandle<span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> y)<span class="op">;</span></span>
<span id="cb2-210"><a href="#cb2-210" aria-hidden="true" tabindex="-1"></a>              <span class="fu">updateLines</span>()<span class="op">;</span></span>
<span id="cb2-211"><a href="#cb2-211" aria-hidden="true" tabindex="-1"></a>              <span class="fu">updateAnnotations</span>()<span class="op">;</span></span>
<span id="cb2-212"><a href="#cb2-212" aria-hidden="true" tabindex="-1"></a>          }))<span class="op">;</span></span>
<span id="cb2-213"><a href="#cb2-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-214"><a href="#cb2-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-215"><a href="#cb2-215" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> main<span class="op">;</span></span>
<span id="cb2-216"><a href="#cb2-216" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-217"><a href="#cb2-217" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span>
<span id="cb2-218"><a href="#cb2-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-219"><a href="#cb2-219" aria-hidden="true" tabindex="-1"></a><span class="vs">## Complex Exponentials FTW</span></span>
<span id="cb2-220"><a href="#cb2-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-221"><a href="#cb2-221" aria-hidden="true" tabindex="-1"></a><span class="vs">We start from the formula for complex exponentials:</span></span>
<span id="cb2-222"><a href="#cb2-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-223"><a href="#cb2-223" aria-hidden="true" tabindex="-1"></a><span class="vs">$$</span><span class="sc">\b</span><span class="vs">egin{eqnarray*}e^{ix} &amp; &amp; = &amp; </span><span class="sc">\ \c</span><span class="vs">os x + i </span><span class="sc">\s</span><span class="vs">in x </span><span class="sc">\\</span><span class="vs"> e^{-ix} &amp; = </span><span class="sc">\ \c</span><span class="vs">os -x + i </span><span class="sc">\s</span><span class="vs">in -x &amp; = &amp; </span><span class="sc">\c</span><span class="vs">os x - i </span><span class="sc">\s</span><span class="vs">in x </span><span class="sc">\e</span><span class="vs">nd{eqnarray*}$$</span></span>
<span id="cb2-224"><a href="#cb2-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-225"><a href="#cb2-225" aria-hidden="true" tabindex="-1"></a><span class="vs">We re-arrange this a bit to find a formula for cosines and sines in terms of the exponentials. This is maybe the two trigonometry formulas worth memorizing:</span></span>
<span id="cb2-226"><a href="#cb2-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-227"><a href="#cb2-227" aria-hidden="true" tabindex="-1"></a><span class="vs">$$</span><span class="sc">\b</span><span class="vs">egin{eqnarray*} </span><span class="sc">\c</span><span class="vs">os x &amp; = &amp; </span><span class="sc">\f</span><span class="vs">rac{e^{ix}+e^{-ix}}{2} </span><span class="sc">\\</span><span class="vs"> </span><span class="sc">\s</span><span class="vs">in x &amp; = &amp; </span><span class="sc">\f</span><span class="vs">rac{e^{ix}-e^{-ix}}{2} </span><span class="sc">\e</span><span class="vs">nd{eqnarray*}$$</span></span>
<span id="cb2-228"><a href="#cb2-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-229"><a href="#cb2-229" aria-hidden="true" tabindex="-1"></a><span class="vs">Never memorize a formula for sines and cosines of sums again. [Stein](https://wstein.org/edu/winter06/20b/notes/html/node30.html) has some examples of how you can use this.</span></span>
<span id="cb2-230"><a href="#cb2-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-231"><a href="#cb2-231" aria-hidden="true" tabindex="-1"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>